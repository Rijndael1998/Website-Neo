import { ReactCompareSlider, ReactCompareSliderImage } from 'react-compare-slider';
import YoutubeEmbed from "@/components/external/youtube/_embed";
import GodotEmbed from "@/components/external/GodotEmbed";
import LazyLocalImage from "@/components/lazy/_lazyLocalImage";
import { LazyLocalCompare, LazyLocalCompareImage } from "@/components/lazy/_lazyLocalCompare";
import image from "./top.png";
import blender from "./images/blender.png";
import compositor from "./images/compositor.png";
import og from "./images/1og.webp";
import pg from "./images/1.webp";
import hq1 from "./images/hq1.webp";
import hq2 from "./images/hq2.jpg";
import hq3 from "./images/hq3.webp";


export const metadata = {
    title: "Penumbra",
    description: "Penumbra is a mouse-based survival game that I made with 5 others for the 2025 GMTK Jam. You can play it here on my website.",
}

# Penumbra

<LazyLocalImage src={image} />

This game was made for the [GMTK Game Jam 2025](https://itch.io/jam/gmtk-2025). It was my first every game jam that I took a part in and I had a lot of fun doing it as well as playing other people's creations.

# Play

<GodotEmbed
source={"/fun/penumbra/index.html"}
external={"https://jman9092.itch.io/penumbra"}
externalShowText={"Play on Itch.io"}
/>

# Game creation

On my team, I worked closely with 5 other people to create this game in [Godot](https://godotengine.org/).

We had some loosely defined roles in the game and links to their itch.io pages:
    - [Jman](https://jman9092.itch.io/): Project management & Music
    - [Freya](https://nanofreya.itch.io/): Sprites & UI
    - [Astra Anima](https://astraanima.itch.io/): Sprites, UI & SFX
    - [Flxli](https://flxli227.itch.io/): Code & UI
    - [Alifeee](https://alifeee.itch.io/): Code
    - [Me](https://rijndael1998.itch.io/): Code


My primary contribution was the code for the game. I worked mainly on the enemies and the drops, but I touched all the bits of code in the game. However, I also managed to create the background sprite for the background, which I think is a lot more interesting than the tweens I did in the game.

## Enemies & Drops
I more or less single handedly created all of the code that was needed for the drops of the enemies. 

Motes come from the fallen monsters. Initially, they scatter, take time to appear and become more opaque. When they're at their most opaque, they can then be picked up by the spell the player creates. If they player doesn't pick them up, they lose their physical structure and fade away. The motes in this game are needed to open the portal or buy upgrades.

## Background
The background was actually relatively easy to make. I started off with a pretty realistic render of a ocean that looped seamlessly.

<LazyLocalImage src={blender} alt={"Blender window showing the rendering process"} cap />

I applied some compositing effects in a way that would tone down the effects of realism but also look cool.

<LazyLocalImage src={compositor} alt={"Compositing process"} cap />

Here you can see the difference between the raw and composited image.

<LazyLocalCompare
a={<LazyLocalCompareImage src={og} alt={"Original image"} cap />}
b={<LazyLocalCompareImage src={pg} alt={"Final image"} cap />}
/>


Because we didn't have time to figure out how to embed a webm or mp4 into the game engine and set it as a background, I opted to simply make all of the frames induvidual jpg images. I did also compress all of these images, that's why most of them look rather bad. From these images, you can make an animated sprite. However, Alifeee was not happy about the water asset being 1/4 of the total of our assets, but the assets we made were still really small that it didn't really have a big impact overall. My push with all of these images was the biggest single push in the entire project.

Here is a comparison of the two sprites if I had rendered them at a higher quality.
<LazyLocalCompare
a={<LazyLocalCompareImage src={hq2} alt={"High quality original image"} cap />}
b={<LazyLocalCompareImage src={hq3} alt={"High quality final image"} cap />}
/>

Obviously, if I rendered them at this kind of quality, the game would've balooned in size and would also probably not fit the aesthetic.


Here's a small animation of all the frames:
<video controls autoPlay muted loop>
<source src="/penumbra_bg.webm" type="video/webm"/>
</video>

The final adjustments are made in the game engine and it turned out to look really good.

<video controls autoPlay muted loop>
<source src="/penumbra_blank.webm" type="video/webm"/>
</video>

## Source 
We have a repository of the game [here](https://github.com/alifeee/penumbra) on GitHub. You can also play the game on [itch.io](https://jman9092.itch.io/penumbra).

